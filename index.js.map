{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst API_KEY = '47639623-264b1095d84da06504953512f';\n\nasync function getImg(searchValue) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  const url = `https://pixabay.com/api/?${searchParams.toString()}`;\n\n  try {\n    const res = await fetch(url);\n\n    if (!res.ok) {\n      throw new Error(`HTTP error! status: ${res.status}`);\n    }\n\n    const data = await res.json();\n\n    if (!data.hits || data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'No images found for the query.',\n        position: 'topRight',\n      });\n      throw new Error('No images found for the query.');\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Error fetching images:', error.message);\n    throw error;\n  }\n}\n\nexport { getImg };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet galleryLightbox;\n\nfunction createCardsMarkup(cards) {\n  const cartItem = cards\n    .map(\n      ({\n        tags,\n        webformatURL,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"values-container\">\n                <ul class=\"labels\">\n                    <li>Likes</li>\n                    <li>${likes}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Views</li>\n                    <li>${views}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Comments</li>\n                    <li>${comments}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Downloads</li>\n                    <li>${downloads}</li>\n                </ul>\n            </div>\n        </a>\n      </li>`\n    )\n    .join('');\n\n  loadSimpleLitebox(cartItem);\n}\n\nfunction loadSimpleLitebox(cartItem) {\n  const gallery = document.querySelector('ul.images-div');\n  gallery.innerHTML = cartItem;\n\n  if (galleryLightbox) {\n    galleryLightbox.refresh();\n  } else {\n    galleryLightbox = new SimpleLightbox('.images-div a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport { createCardsMarkup };","import { getImg } from './js/pixabay-api';\nimport { createCardsMarkup } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst fetchUsersBtn = document.querySelector('button[type=submit]');\nconst imgs = document.querySelector('.images-div');\nconst loaderClass = document.querySelector('.loaderClass');\n\nfetchUsersBtn.addEventListener('click', handleSearch);\n\nfunction handleSearch(evt) {\n  evt.preventDefault();\n  let searchInput = document.querySelector('input[name=\"search\"]');\n  let notFoundTextEl = document.querySelector('.not-found-img');\n  let searchValue = searchInput.value.trim();\n\n  if (searchValue <= 0) {\n    iziToast.show({\n      title: '❌',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      color: 'ef4040',\n    });\n    return;\n  }\n\n  loaderClass.style.display = 'flex';\n\n  getImg(searchValue)\n    .then(data => {\n      if (data.total === 0) {\n        imgs.innerHTML = '';\n        notFoundTextEl.innerHTML = `Results for query <span>${searchValue}</span> not found!`;\n        iziToast.show({\n          title: '❌',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#ef4040',\n          messageColor: 'white',\n        });\n        return;\n      }\n\n      notFoundTextEl.innerHTML = '';\n\n      createCardsMarkup(data.hits);\n\n      const imageElements = document.querySelectorAll('.gallery-img');\n      const loadPromises = Array.from(imageElements).map(img => {\n        return new Promise(resolve => {\n          img.onload = resolve;\n          img.onerror = resolve;\n        });\n      });\n\n      Promise.all(loadPromises)\n        .then(() => {\n          console.log(loadPromises);\n        })\n        .catch(err => {\n          loaderClass.innerHTML = '';\n          console.error(err);\n        });\n    })\n    .catch(console.error)\n    .finally(() => {\n      loaderClass.style.display = 'none';\n    });\n  searchInput.value = '';\n}"],"names":["API_KEY","getImg","searchValue","url","res","data","iziToast","error","galleryLightbox","createCardsMarkup","cards","cartItem","tags","webformatURL","largeImageURL","likes","views","comments","downloads","loadSimpleLitebox","gallery","SimpleLightbox","fetchUsersBtn","imgs","loaderClass","handleSearch","evt","searchInput","notFoundTextEl","imageElements","loadPromises","img","resolve","err"],"mappings":"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"}